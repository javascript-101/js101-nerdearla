# 4. Scraping like a boss üòé

{% hint style="success" %}

## üìöConceptos

- .forEach\(\)
- .split\(\)
- **cheerio**
  {% endhint %}

## Introducci√≥n

En esta secci√≥n vamos a empezar a utilizar el concepto de _**Web Scraping**_ con la ayuda de m√©todos de javascript y **cheerio**.

### M√©todos de Javascript

Javascript como cualquier otro lenguaje nos brinda ciertos m√©todos para poder trabajar, los que vamos a utilizar en esta ocasi√≥n para poder iterar y alterar los datos obtenidos con _**cheerio**_ son **.split\(\)** y **.forEach\(\)**

#### Ejemplos

El m√©todo **.split\(\)** nos permite obtener un array en donde cada caracter o letra ocupa un espacio en el mismo, acepta como par√°metros un string que funcione como separador para indicarle al m√©todo que sepa d√≥nde deber√≠a cortar la cadena.

```javascript
const theBestSith = 'vader, plagueis, revan, exar, sidious'
const sithList = theBestSith.split(',')

;['vader', ' plagueis', ' revan', ' exar', ' sidious'] // Array
```

Con el m√©todo **.forEach\(\)** podemos iterar sobre un array, √©ste m√©todo acepta una funci√≥n como par√°metro y la misma recibe como par√°metro cada uno de los elementos a iterar, veamos un ejemplo con el array que obtuvimos en el ejemplo anterior:

```javascript
const theBestSith = 'vader, plagueis, revan, exar, sidious'
const sithList = theBestSith.split(',')

;['vader', ' plagueis', ' revan', ' exar', ' sidious'] // Array

sithList.forEach(function(sith) {
  console.log(sith + ' üíõ')
})
```

### Web Scraping

Es una t√©cnica para poder extraer informaci√≥n de p√°ginas web, un poco relacionado con lo que es la transformaci√≥n de datos de un **HTML,** nos permite de alguna manera almacenar estos datos y poder utilizarlos.

El m√©todo m√°s com√∫n en el que se utiliza el scraping es en la extracci√≥n de datos para almacenarlos en un excel, spreadsheet, etc y realizar alguna clase de reporte o an√°lisis con el mismo.

{% hint style="info" %}
Para saber un poco m√°s sobre Web Scraping üëâüèª[**https://aukera.es/blog/web-scraping/**](https://aukera.es/blog/web-scraping/)\*\*\*\*
{% endhint %}

### Cheerio

Con **cheerio** podemos interactuar directamente con un **HTML** a trav√©s del **DOM**, adem√°s nos provee de selectores muy parecidos a los de jQuery para que todo sea m√°s amigable ya que la librer√≠a utiliza una implementaci√≥n \*\*\*\*del core de jQuery.

#### **Ejemplo**

\*\*\*\*

{% hint style="info" %}
Te dejamos una serie de links con la documentaci√≥n oficial de cheerio para que puedas tener a mano los selectores y toda la informaci√≥n necesaria para poder trabajar con esta librer√≠a

**üëâüèª** [**https://cheerio.js.org/**](https://cheerio.js.org/)\*\*\*\*
{% endhint %}

### Paso 4

1. Vamos a crear un **array** llamado **`nerdearlaEvents`** para guardar todo ah√≠.

2. Vamos a pasar el HTML que obtuvimos por **axios** a **cheerio** usando el m√©todo [.load](https://github.com/cheeriojs/cheerio)

Ejemplo:

```javascript
const cheerio = require('cheerio')
const $ = cheerio.load('<ul id="fruits">...</ul>')

const ul = $('#fruits')
```

3. Vamos a obtener cada uno de los **'ul'** que contienen los d√≠as de la agenda.
   Para esto tenemos que encontrar la clase espec√≠fica que tiene este ul y para ello podemos usar el panel de elementos de Chrome o Firefox.

4) Iteremos sobre estos **'ul'** us√°ndo el m√©todo `.each()` de cherio

Ejemplo:

```javascript
const fruits = []

ul.each(function(index, element) {
  const fruit = $(element).text()
  fruits.push()
})
```

5. Debemos obtener el t√≠tulo de la charla. Para ello usaremos los m√©todos `.find()` para buscar un elemento entro de nuestro ul y `.text()` para extraer su texto.
   Necesitaremos tambi√©n un selector espec√≠fico para ello usar el panel de elementos de Chrome.

Ejemplo:

```javascript
const title = $(ul)
  .find('h4')
  .text()
```

6. Separemos el d√≠a (day) de la sala (room) con un **.split\(\)**
   Encontrar que string separa el d√≠a de la sala

7) Obtengamos cada uno de los subtitles de la agenda que se encuentran en una **'ul'** tambi√©n.
   Este paso es identico al paso **4**.

8) \***\*Ahora separemos la fecha de la descripci√≥n con un **.split\(\)\*\*
   Encontrar que string separa la fecha de la descripci√≥n.

9. Vamos a buscar todos los elementos `li` que vivan dentro de `ul` usando el metodo `.find()`

10. Debemos iterar por todos estos `li` nuevamente usando `.each()`.
    Dentro del `.each()` y de igual manera que hicimos en el paso 4 y 7, debemos encontrar el id, hora (time), titulo (title), descripci√≥n (info) de la charla.

11. Sin salir del `each()`, esta parte esta un poco compleja porque no esta en un solo lugar, hint: puede vivir tanto en el room como en la descripci√≥n y debemos usar la constante **TALK_TYPE**

11) Por ultimo guardemos todos estos datos dentro un **objeto** **`talk`**

12) Esto objeto **`talk`** guard√©moslo con el m√©todo .push\(\) en nuestro **array** antes creado **`nerdearlaEvents`**
